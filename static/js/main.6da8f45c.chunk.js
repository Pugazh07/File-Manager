(this["webpackJsonpfile-manager"]=this["webpackJsonpfile-manager"]||[]).push([[0],{10:function(e,t,n){e.exports={Modal:"Modal_Modal__F-sqn"}},25:function(e,t,n){e.exports={Backdrop:"Backdrop_Backdrop__neTCb"}},40:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),c=n(14),o=n.n(c),r=n(27),i=n(7),s=(n(40),n(28)),d=n(22),u=n(23),h=n(30),p=n(29),j="SELECTPATH",f="ADDITEM",m="SAVEITEM",b="CANCELITEM",O="DELETEITEM",v="RENAMEITEM",C="SEARCHITEMS",P=n(8),x=n(24),y=n(1),I=function(e){var t=Object(a.useState)({value:null,istouched:!1}),n=Object(P.a)(t,2),l=n[0],c=n[1];return console.log(e),Object(y.jsx)("input",{type:e.type,className:e.className,value:l.istouched?l.value:e.value,autoFocus:e.autoFocus,onFocus:function(e){e.stopPropagation(),e.currentTarget.select()},onChange:function(e){c({value:e.currentTarget.value,istouched:!0})},onBlur:function(t){t.stopPropagation(),t.currentTarget.value!==e.value||e.addItem?e.onSaveItem(t.currentTarget.value):e.onCancelItem(),c({value:null,istouched:!1})},onClick:function(e){e.stopPropagation()},onKeyDown:function(t){switch(t.stopPropagation(),t.key){case"Enter":t.currentTarget.value!==e.value||e.addItem?e.onSaveItem(t.currentTarget.value):e.onCancelItem(),c({value:null,istouched:!1});break;case"Escape":e.onCancelItem(),c({value:null,istouched:!1})}},size:e.size})},g=function(e){var t=e.node,n=e.onSelectPath,l=e.selectedPath,c=Object(a.useState)(!1),o=Object(P.a)(c,2),r=o[0],s=o[1],d=Object(i.d)((function(e){return e.addItem})),u=Object(i.c)(),h=function(e){return u({type:m,value:{name:e}})},p=function(){return u({type:b})},j=!!t.children;return Object(y.jsxs)("li",{className:"TreeNode",children:[Object(y.jsxs)("div",{children:[j&&Object(y.jsx)("div",{className:"NodeToggler ".concat(r?"active":""),children:Object(y.jsx)(x.a,{onClick:function(){s(!r)},icon:"caret-right"})}),Object(y.jsxs)("span",{className:l===t.path?"active":null,onClick:function(e){e.stopPropagation(),n(t.path,t.parent,t.type,t.dirCount,t.fileCount,!0,"tree")},onDoubleClick:function(e){e.stopPropagation(),s(!r)},children:[Object(y.jsx)("i",{className:"mr-1 ".concat("application/directory"===t.type?"fa fa-folder":"fa fa-file")}),d.renameItem&&l===t.path?Object(y.jsx)(I,{type:"text",value:t.name,autoFocus:!0,size:4,onSaveItem:h,onCancelItem:p}):t.name]})]}),"application/directory"===d.type&&t.path===d.target&&Object(y.jsx)(I,{type:"text",className:"Input",value:d.inputValue,autoFocus:!0,addItem:d,size:3,onSaveItem:h,onCancelItem:p}),j&&t.children.length>0&&r&&Object(y.jsx)("ul",{className:"TreeContainer",children:Object(y.jsx)(S,{data:t.children,onSelectPath:n,selectedPath:l})})]})},S=(n(45),function(e){var t=e.data,n=void 0===t?[]:t,a=e.onSelectPath,l=e.selectedPath;return Object(y.jsx)("ul",{className:"TreeContainer",children:n.map((function(e){return Object(y.jsx)(g,{node:e,onSelectPath:a,selectedPath:l},e.path)}))})}),T=(n(46),n(47),function(e){var t=Object(a.useState)(""),n=Object(P.a)(t,2),l=n[0],c=n[1];return Object(y.jsx)("div",{className:"Search",children:Object(y.jsxs)("div",{className:"SearchBar",children:[Object(y.jsx)("input",{className:"SearchInput",value:l,placeholder:"Search",onFocus:function(e){e.currentTarget.select()},onChange:function(e){c(e.target.value)},onKeyUp:function(t){switch(t.stopPropagation(),t.key){case"Enter":e.onSearchItems(l.toLowerCase())}}}),Object(y.jsx)("span",{className:"SearchIcon",onClick:l?function(){e.onSearchItems(l.toLowerCase())}:null,children:Object(y.jsx)("i",{className:"fa fa-search"})})]})})}),N=(n(48),n(25)),F=n.n(N),k=function(e){return e.show?Object(y.jsx)("div",{className:F.a.Backdrop,onClick:e.clicked}):null},D=n(10),E=n.n(D),M=function(e){console.log("[Modal.js] props",E.a);var t=Object(y.jsxs)("section",{children:['Are you sure to remove "',e.pathToDelete,'"']}),n=Object(y.jsxs)("footer",{children:[Object(y.jsx)("button",{className:E.a.Cancel,onClick:function(t){return e.closeModal(t,!1)},children:"Cancel"}),Object(y.jsx)("button",{className:E.a.Confirm,onClick:function(t){return e.closeModal(t,!0)},children:"Proceed"})]});return e.pathToDelete&&"root"!==e.pathToDelete||(e.conditional||(n=Object(y.jsx)("footer",{children:Object(y.jsx)("button",{className:E.a.Cancel,onClick:function(t){return e.closeModal(t,!1)},children:"Ok"})})),t="root"===e.pathToDelete?Object(y.jsx)("section",{children:'"root" folder can\'t be removed'}):Object(y.jsx)("section",{children:e.modalContent})),Object(y.jsxs)(l.a.Fragment,{children:[Object(y.jsx)(k,{show:e.show,clicked:function(t){return e.closeModal(t,!1)}}),Object(y.jsxs)("div",{className:E.a.Modal,style:{transform:e.show?"translateY(0)":"translateY(100vh)",opacity:e.show?"1":"0"},children:[Object(y.jsx)("header",{children:"Alert"}),t,n]})]})},w=Object(i.b)((function(e){return{root:e.root[0],selectedPath:e.selectedPath,selectedPathType:e.selectedPathType,addItem:e.addItem}}),(function(e){return{onAddItem:function(t){return e({type:f,value:t})},onDeleteItem:function(){return e({type:O})},onRenameItem:function(t){return e({type:v,value:t})},onCancelItem:function(){return e({type:b})},onSaveItem:function(t){return e({type:m,value:{name:t.file.name,choosenFile:t}})}}}))((function(e){var t=Object(a.useState)(!1),n=Object(P.a)(t,2),l=n[0],c=n[1],o=Object(a.useState)({enable:!1,choosenFile:null}),r=Object(P.a)(o,2),i=r[0],s=r[1];console.log(i.choosenFile);var d=function(t,n){t.stopPropagation(),l?(!0===n&&e.onDeleteItem(),c(!1)):e.addItem.error?e.onCancelItem():i.enable&&(i.choosenFile&&!0===n&&e.onSaveItem(i.choosenFile),s({enable:!1,choosenFile:null}))};return Object(y.jsxs)("div",{className:"HandleFolderFile",children:[Object(y.jsx)("button",{className:"button",disabled:!e.selectedPath||e.selectedPath===e.root.path,onClick:function(){return e.onRenameItem(e.selectedPathType)},children:"Rename"}),Object(y.jsx)("button",{className:"button",disabled:!e.selectedPath||"application/file"===e.selectedPathType,onClick:function(){e.onAddItem("application/directory")},children:"Add Folder"}),Object(y.jsx)("button",{className:"button",disabled:!e.selectedPath||"application/file"===e.selectedPathType,onClick:function(){s({enable:!0,choosenFile:i.choosenFile})},children:"Add File"}),Object(y.jsx)("button",{className:"DeleteFolderFile button",disabled:!e.selectedPath||e.selectedPath===e.root.path,onClick:function(e){e.stopPropagation(),c(!0)},children:"Delete"}),l?Object(y.jsx)(M,{show:l,conditional:!0,modalContent:"Please select a path",pathToDelete:e.selectedPath,closeModal:d}):null,e.addItem.error?Object(y.jsx)(M,{show:e.addItem.error,conditional:!1,modalContent:e.addItem.error,pathToDelete:null,closeModal:d}):null,i.enable?Object(y.jsx)(M,{show:i.enable,conditional:!0,modalContent:Object(y.jsx)("input",{type:"file",name:"file",onChange:function(t){return function(t){t.stopPropagation();var n=t.target.files;e.onAddItem("application/file");var a=new FileReader;a.readAsDataURL(n[0]),a.onload=function(e){s({enable:i.enable,choosenFile:{file:n[0],data:e.target.result}})}}(t)}}),closeModal:d}):null]})})),A=function(e){return Object(y.jsxs)("div",{className:"Header",children:[Object(y.jsx)(T,{onSearchItems:e.onSearchItems}),Object(y.jsx)(w,{})]})},R=(n(49),function(e){return console.log(e),Object(y.jsx)("div",{className:"SearchResult",children:e.item.path})}),L=(n(50),n(51),Object(i.b)((function(e){return{addItem:e.addItem}}),(function(e){return{onSaveItem:function(t){return e({type:m,value:{name:t}})},onCancelItem:function(){return e({type:b})}}}))((function(e){return console.log(e.selectedContent),Object(y.jsxs)("div",{className:"SelectedContent",children:[Object(y.jsxs)("section",{className:"SelectedItem SelectedContentHeader",children:[Object(y.jsx)("div",{children:"Name"}),Object(y.jsx)("div",{children:"Type"}),Object(y.jsx)("div",{children:"Size"})]}),Object(y.jsx)("section",{children:e.selectedContent.map((function(t){return Object(y.jsxs)("section",{className:"SelectedItem SelectedItemContent ".concat(e.selectedPath===t.path?"active":null),children:[Object(y.jsxs)("div",{children:[Object(y.jsx)("i",{className:"mr-1 ".concat("application/directory"===t.type?"fa fa-folder":"fa fa-file")}),t.name]}),Object(y.jsx)("div",{children:t.type}),Object(y.jsx)("div",{children:t.size})]},t.path)}))}),Object(y.jsx)("section",{})]})}))),B=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.selectedPath?Object(y.jsxs)("p",{children:["Selected path: ",this.props.selectedPath]}):"Please select a folder/file",t=null;return console.log(this.props),this.props.searchResult&&(t=this.props.searchResult.length>0?this.props.searchResult.map((function(e){return Object(y.jsx)(R,{item:e},e.path)})):"No results Found"),Object(y.jsxs)("div",{className:"FileManager",children:[Object(y.jsx)("section",{children:Object(y.jsx)(A,{onSearchItems:this.props.onSearchItems})}),Object(y.jsxs)("div",{className:"Container",children:[Object(y.jsx)("section",{className:"TreeView",children:Object(y.jsx)(S,{data:this.props.root,onSelectPath:this.props.onSelectPath,selectedPath:this.props.selectedPath})}),Object(y.jsxs)("section",{className:"Content",children:[e,t&&Object(y.jsxs)("div",{children:[Object(y.jsx)("h1",{children:"Search result"}),t]}),this.props.selectedContent&&Object(y.jsx)(L,{selectedContent:this.props.selectedContent,selectedPath:this.props.selectedPath,onSelectPath:this.props.onSelectPath})]})]})]})}}]),n}(a.Component),z=Object(i.b)((function(e){return{root:e.root,selectedPath:e.selectedPath,searchResult:e.searchResult,selectedContent:e.selectedContent}}),(function(e){return{onSelectPath:function(t,n,a,l,c,o,r){return e({type:j,value:{path:t,pathParent:n,pathType:a,dirCount:l,fileCount:c,expand:o,origin:r}})},onSearchItems:function(t){return e({type:C,value:t})}}}))(B),J=n(9),_=n(26);J.b.add(_.a);n(52);var H=function(){return Object(y.jsx)(s.a,{children:Object(y.jsxs)("div",{className:"App",children:[Object(y.jsx)("div",{style:{textAlign:"center"},children:Object(y.jsx)("h1",{children:"React File Maanger"})}),Object(y.jsx)(z,{})]})})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(t){var n=t.getCLS,a=t.getFID,l=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),l(e),c(e),o(e)}))},K=n(4),U=n(16),Y={root:[{parent:null,path:"root",name:"root",type:"application/directory",dirCount:3,fileCount:1,children:[{parent:"root",path:"root/folder1",name:"folder1",type:"application/directory",dirCount:1,fileCount:1,children:[{parent:"root/folder1",path:"root/folder1/folder1",name:"folder1",type:"application/directory",dirCount:0,fileCount:0,children:[]},{parent:"root/folder1",type:"application/file",name:"file1.txt",path:"root/folder1/file1.txt"}]},{parent:"root",path:"root/folder2",name:"folder2",type:"application/directory",dirCount:0,fileCount:2,children:[{parent:"root/folder2",type:"application/file",name:"file1.txt",path:"root/folder2/file1.txt"},{parent:"root/folder2",type:"application/file",name:"file2.txt",path:"root/folder2/file2.txt"}]},{parent:"root",path:"root/folder3",name:"folder3",type:"application/directory",dirCount:0,fileCount:1,children:[{parent:"root/folder3",type:"application/file",name:"file1.txt",path:"root/folder3/file1.txt"}]},{parent:"root",type:"application/file",name:"file1.txt",path:"root/file1.txt"}]}],selectedPath:null,selectedPathParent:null,selectedPathType:null,selectedPathDirCount:null,selectedPathFileCount:null,addItem:{type:null,target:null,renameItem:!1}},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:console.log("SelectPath triggered");var n=function n(o){if(t.value.path===o.path||t.value.path===e.root[0].path)"application/directory"===t.value.pathType?l=Object(U.a)(o.children):"application/directory"===t.value.pathType&&(l={downloadOption:!0});else if(o.children){var r=o.children.findIndex((function(e){return e.name===a[c]}));c++,n(o.children[r])}},a=t.value.path.split("/").slice(1),l=null,c=0;return t.value.expand&&n(e.root[0]),console.log(l),t.value.expand?Object(K.a)(Object(K.a)({},e),{},{selectedPath:t.value.path,selectedPathParent:t.value.pathParent,selectedPathType:t.value.pathType,selectedPathDirCount:t.value.dirCount,selectedPathFileCount:t.value.fileCount,selectedContent:l,selectedFrom:t.value.origin,searchResult:null}):Object(K.a)(Object(K.a)({},e),{},{selectedPath:t.value.path,selectedPathParent:t.value.pathParent,selectedPathType:t.value.pathType,selectedPathDirCount:t.value.dirCount,selectedPathFileCount:t.value.fileCount,selectedFrom:t.value.origin,searchResult:null});case O:console.log("DeleteItem triggered");var o=function t(n){if(u===d-1)n.children=n.children.filter((function(t){return t.path!==e.selectedPath})),s=Object(U.a)(n.children);else if(n.children){var a=n.children.findIndex((function(e){return e.name===r[u]}));u++,t(n.children[a])}},r=e.selectedPath.split("/").slice(1),i=JSON.parse(JSON.stringify(e.root)),s=null,d=r.length,u=0;return o(i[0]),Object(K.a)(Object(K.a)({},e),{},{root:i,selectedPath:null,selectedPathParent:null,selectedPathType:null,selectedPathDirCount:null,selectedPathFileCount:null,selectedContent:s});case f:if(console.log("AddItem triggered"),e.selectedPathType){var h="application/directory"===e.selectedPathType?e.selectedPath:e.selectedPathParent,p=null;return"application/directory"===t.value?p="folder".concat(e.selectedPathDirCount+1):"application/file"===t.value&&(p="file".concat(e.selectedPathFileCount+1,".txt")),Object(K.a)(Object(K.a)({},e),{},{addItem:{type:t.value,target:h,inputValue:p}})}break;case m:console.log("SaveItem triggered");var P=JSON.parse(JSON.stringify(e.root)),x=e.selectedPath.split("/").slice(1),y=e.selectedPathDirCount,I=e.selectedPathFileCount,g=e.addItem.renameItem,S=null,T=null,N=null,F=0,k=function n(a){if(e.addItem.target===a.path||e.selectedPath===e.root[0].path||g&&(e.selectedPath===e.root[0].path||e.selectedPathParent===a.path)){var l=a.children.findIndex((function(n){return n.name===t.value.name&&n.type===e.addItem.type}));if(!(T=l>=0?"".concat(t.value.name," already present in this folder"):null)){if(e.addItem.renameItem){var c=a.children.findIndex((function(t){return t.path===e.selectedPath}));a.children[c].name=t.value.name,a.children[c].path=a.path+"/"+t.value.name,S=a.children[c].path}else"application/directory"===e.addItem.type?(a.children=a.children.concat({parent:a.path,path:a.path+"/"+t.value.name,name:t.value.name,type:e.addItem.type,dirCount:0,fileCount:0,children:[]}),a.dirCount=a.dirCount+1,y=a.dirCount):(a.children=a.children.concat({parent:a.path,type:e.addItem.type,name:t.value.name,path:a.path+"/"+t.value.name,date:t.value.choosenFile.data}),a.fileCount=a.fileCount+1,I=a.fileCount);a.children.sort((function(e,t){return e.type===t.type?e.name>t.name?1:-1:e.type>t.type?1:-1})),N=Object(U.a)(a.children)}}else if(a.children){var o=a.children.findIndex((function(e){return e.name===x[F]}));F++,n(a.children[o])}};return k(P[0]),T?Object(K.a)(Object(K.a)({},e),{},{addItem:Object(K.a)(Object(K.a)({},e.addItem),{},{error:T})}):Object(K.a)(Object(K.a)({},e),{},{root:P,addItem:{type:null,target:null,error:T},selectedPath:S||e.selectedPath,selectedPathDirCount:y,selectedPathFileCount:I,selectedContent:N});case b:return console.log("CancelItem triggered"),Object(K.a)(Object(K.a)({},e),{},{addItem:{type:null,target:null,renameItem:!1}});case v:return Object(K.a)(Object(K.a)({},e),{},{addItem:Object(K.a)(Object(K.a)({},e.addItem),{},{type:t.value,renameItem:!0,error:null})});case C:console.log(t.type,"triggered",t.value);var D=function e(n){n.name.toLowerCase().indexOf(t.value)>=0&&E.push(n),n.children&&n.children.forEach((function(t){e(t)}))},E=[];return D(e.root[0]),console.log(E),Object(K.a)(Object(K.a)({},e),{},{selectedContent:null,searchResult:E})}return e},G=Object(r.a)(q);o.a.render(Object(y.jsx)(i.a,{store:G,children:Object(y.jsx)(H,{})}),document.getElementById("root")),V()}},[[56,1,2]]]);
//# sourceMappingURL=main.6da8f45c.chunk.js.map